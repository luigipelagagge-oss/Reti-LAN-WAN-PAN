<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio: Sender & Receiver</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* --- STILI GENERALI --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 1200px; margin: 0 auto; padding: 20px; background-color: #f4f6f9; }
        h1, h2, h3, h4, h5 { color: #2c3e50; }
        .container { background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .nav-btn { background: #6c757d; color: white; padding: 10px 15px; text-decoration: none; border-radius: 5px; display: inline-block; margin-bottom: 20px; transition: all 0.3s; }
        .nav-btn:hover { background: #5a6268; transform: translateX(-3px); }
        hr { border: 0; border-top: 1px solid #eee; margin: 40px 0; }

        /* --- EFFETTO HOVER SULLO SCHEMA (LAUNCHPAD) --- */
        .schema-wrapper {
            position: relative;
            display: inline-block;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .schema-wrapper img {
            display: block;
            transition: transform 0.5s ease, filter 0.3s ease;
        }
        /* L'overlay scuro con il bottone Play */
        .schema-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .play-icon {
            font-size: 60px;
            color: white;
            text-shadow: 0 0 20px rgba(255,255,255,0.8);
            transform: scale(0.8);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        /* Animazione al passaggio del mouse */
        .schema-wrapper:hover { transform: translateY(-5px); }
        .schema-wrapper:hover img { transform: scale(1.05); filter: blur(2px); }
        .schema-wrapper:hover .schema-overlay { opacity: 1; }
        .schema-wrapper:hover .play-icon { transform: scale(1.2); }


        /* --- EFFETTO MONITOR SERIALE SCORREVOLE (MATRIX STYLE) --- */
        .monitor-box {
            background: #000;
            border-radius: 0 0 8px 8px;
            height: 300px;
            overflow: hidden; /* Nasconde il testo che esce */
            position: relative;
            border: 2px solid #333;
        }
        .monitor-content {
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #00ff00;
            position: absolute;
            top: 0; left: 0; width: 100%;
            /* Animazione */
            animation: scrollLog 15s linear infinite;
            animation-play-state: paused; /* Fermo di default */
        }
        /* Il testo scorre solo quando passi il mouse sopra il box */
        .monitor-box:hover .monitor-content {
            animation-play-state: running;
        }
        
        @keyframes scrollLog {
            0% { transform: translateY(0); }
            100% { transform: translateY(-70%); } /* Scorre verso l'alto */
        }
        
        /* Stile Bottone Soluzione */
        .btn-soluzione {
            background: linear-gradient(135deg, #ffc107 0%, #ffdb4d 100%);
            color: #000; border: none; padding: 15px 30px; 
            font-size: 1.1em; font-weight: bold; cursor: pointer; border-radius: 50px; 
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4); transition: all 0.3s;
        }
        .btn-soluzione:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 193, 7, 0.6); }

        /* Animazione comparsa area soluzione */
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <a href="index.html" class="nav-btn">‚¨Ö Torna alla Mappa</a>

    <div class="container">
        <h1>Laboratorio: Comunicazione Seriale (UART)</h1>
        <p>In questo esperimento collegheremo due schede Arduino affinch√© parlino tra loro. Una scheda (Sender) invier√† comandi, l'altra (Receiver) dovr√† interpretarli ed eseguirli.</p>

        <div style="text-align: center; margin: 30px 0;">
            <h3>Lo Schema di Collegamento</h3>
            <p>TX su RX, RX su TX. GND in comune.</p>
            
            <a href="https://www.tinkercad.com/things/363ul1V5EKu-collegamentoseriale2pingpong?sharecode=RrlQjYR765f2VDB7F_MYtOOU_XZL_Y551m5zwoAZ9rE" target="_blank" style="text-decoration: none;">
                <div class="schema-wrapper">
                    <img src="schema_serial_TINKERCAD.png" alt="Schema Collegamento Seriale" style="max-width: 100%; width: 600px;">
                    <div class="schema-overlay">
                        <div class="play-icon">‚ñ∂ APRI SIMULATORE</div>
                    </div>
                </div>
            </a>
            <p style="font-size: 0.8em; color: #777; margin-top: 5px;">(Passa il mouse sull'immagine e clicca per aprire Tinkercad)</p>
        </div>

        <hr>

        <h2>Esperimento 2: Sender & Receiver (Ping-Pong)</h2>
        
        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">

            <div style="flex: 1; min-width: 300px;">
                <h3 style="color: #0056b3; border-bottom: 2px solid #0056b3; padding-bottom: 5px;">
                    1. Codice A: Sender
                </h3>
                <p>Carica questo codice sulla prima scheda.</p>
                <div style="background-color: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace;">
<pre style="margin: 0;">
void setup() {
  Serial.begin(9600);
}

void loop() {
  Serial.println("ciao");
  delay(1000); 
}
</pre>
                </div>
            </div>

            <div style="flex: 1; min-width: 300px;">
                <h3 style="color: #28a745; border-bottom: 2px solid #28a745; padding-bottom: 5px;">
                    2. Codice B: Receiver
                </h3>
                <p>Qui tocca a te progettare!</p>

                <div style="background-color: #f8f9fa; border-left: 6px solid #28a745; padding: 20px; border-radius: 5px;">
                    <h4 style="margin-top: 0; color: #212529;">üéØ Obiettivo: Risponditore Intelligente</h4>
                    <ol style="line-height: 1.6; padding-left: 20px;">
                        <li><strong>Ascoltare:</strong> Verificare arrivo dati (<code>Serial.available</code>).</li>
                        <li><strong>Pulire:</strong> Rimuovere spazi (<code>.trim()</code>).</li>
                        <li><strong>Filtrare:</strong> Se msg == "ciao", agisci.</li>
                        <li><strong>Rispondere:</strong> 
                            <br>- Contatore < 10: "Grazie msg N"
                            <br>- Contatore = 10: "HO CAPITO"
                        </li>
                    </ol>
                    <div style="text-align: center; margin-top: 15px; font-weight: bold; color: #d63384; background: #fff0f6; padding: 8px; border-radius: 4px;">
                        ‚úèÔ∏è Disegna il Diagramma, poi scrivi il codice.
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-top: 60px; text-align: center;">
            
            <button onclick="document.getElementById('soluzioneBox').style.display = (document.getElementById('soluzioneBox').style.display === 'none') ? 'block' : 'none';" 
                    class="btn-soluzione">
                üëÅÔ∏è Svela la Soluzione
            </button>

            <div id="soluzioneBox" style="display: none; margin-top: 40px; text-align: left; animation: slideDown 0.5s;">
                
                <h4 style="border-left: 5px solid #6610f2; padding-left: 10px; color: #333;">üìä Analisi dei Flussi Dati</h4>
                <p>Passa il mouse sui monitor neri qui sotto per vedere scorrere i dati simulati.</p>
                
                <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                    
                    <div style="flex: 1; min-width: 250px;">
                        <h5 style="background: #333; color: white; padding: 8px 15px; margin: 0; border-radius: 8px 8px 0 0;">Monitor Serial A (Sender)</h5>
                        <div class="monitor-box">
                            <div class="monitor-content">
                                ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>
                                ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>
                                ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>ciao<br>
                                <span style="color: gray;">// Trasmissione continua...</span>
                            </div>
                        </div>
                    </div>

                    <div style="flex: 1; min-width: 250px;">
                        <h5 style="background: #333; color: white; padding: 8px 15px; margin: 0; border-radius: 8px 8px 0 0;">Monitor Serial B (Receiver)</h5>
                        <div class="monitor-box">
                            <div class="monitor-content">
                                <span style="color: gray;">// In ascolto...</span><br>
                                Grazie del messaggio 1<br>
                                Grazie del messaggio 2<br>
                                Grazie del messaggio 3<br>
                                Grazie del messaggio 4<br>
                                Grazie del messaggio 5<br>
                                Grazie del messaggio 6<br>
                                Grazie del messaggio 7<br>
                                Grazie del messaggio 8<br>
                                Grazie del messaggio 9<br>
                                <strong style="color: #ff00ff; border: 1px dashed #ff00ff;">HO CAPITO</strong><br>
                                <span style="color: gray;">// Stop risposte.</span><br><br><br>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <a href="https://www.tinkercad.com/things/363ul1V5EKu-collegamentoseriale2pingpong?sharecode=RrlQjYR765f2VDB7F_MYtOOU_XZL_Y551m5zwoAZ9rE" 
                       target="_blank" style="color: #0d6efd; font-weight: bold;">
                       üîó Apri il progetto originale su Tinkercad
                    </a>
                </div>

            </div>
        </div>

        <hr>
        
    <div style="background-color: #e8f5e9; padding: 30px; border-radius: 10px; margin: 40px 0; text-align: center; border: 1px solid #c3e6cb;">
            <p style="font-size: 1.2em; color: #2c3e50; margin-bottom: 20px;">
                Hai padroneggiato il Ping-Pong seriale?<br>
                √à il momento di simulare uno scenario reale con sensori e attuatori.
            </p>
            <a href="lab_temp.html" style="background: linear-gradient(135deg, #28a745 0%, #218838 100%); color: white; padding: 15px 30px; text-decoration: none; border-radius: 50px; font-weight: bold; font-size: 1.1em; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4); display: inline-block; transition: transform 0.2s;">
                ‚û°Ô∏è VAI AL LAB 3: Monitoraggio Temperatura
            </a>
        </div>
        
        <div style="text-align: center; margin-bottom: 40px;">
            <a href="index.html" class="nav-btn" style="margin: 0 10px;">üè† Mappa</a>
            <a href="#" class="nav-btn" style="margin: 0 10px; background-color: #17a2b8;">‚¨ÜÔ∏è Su</a>
        </div>

    </div>

</body>
</html>
